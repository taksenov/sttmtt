# Тестовое задание на вакансию 'Backend Developer Golang'

**Реализовать сервер для управления состоянием объекта “Трансляция”.**

Трансляция может быть в одном из состояний:
*- Created*
*- Active*
*- Interrupted*
*- Finished*

**Сервис должен предоставлять функции:**

- создание уникального идентификатора трансляции
- удаление трансляции по идентификатору
- отображение списка текущих трансляций и их состояние
- команда запуска: установка состояния “Active”
- команда прерывания: установка состояния “Interrupted”, запуск таймера для перехода в состояние “Finished”, в это время может прийти команда перехода снова в состояние “Active”, это прерывает таймер
- выжидание таймаута и установка состояния “Finished”

**Замечания:**

Логика работы этого сервиса следует из того, что методы изменения состояния вызываются другим сервисом, который сообщает о начале потока (*Active*), его прерывании (*Interrupted*), и возможно, восстановлении до момента истечения времени перехода в состояние *Finished*. Удаление стрима - это административная функция прекращения трансляции с удалением данных о ней из памяти.

**Поэтому:**

- В состояние *Created* не должно быть никакой возможности перейти;
- Из состояния *Finished* не должно быть никакой возможности выйти;
- Удаление трансляции может произойти в любой момент, в любом состоянии трансляции.

**Требования:**

- Таймаут в секундах, как и прочие настраиваемые параметры, передается через переменные окружения, либо параметрами командной строки.
- Минимально, настройки демона должны включать себя выбор порта для входящих соединений, максимально - на Ваше усмотрение
- Итоговое решение должно быть оформлено в качестве репозитория на любом общедоступном git-совместимом сервере (github.com, bitbucket.org, ...) с обязательным наличием README-файлом с инструкцией по запуску и настройке приложения.
- Команды и запросы должны приниматься по протоколу HTTP в соответствии с принципами REST https://en.wikipedia.org/wiki/Representational_state_transfer и в формате “JSON API” http://jsonapi.org/

Например, запрос POST на endpoint *stream-api:5000/api/v1/streams*
Ответ:

```json
{
	"data": {
		"type": "stream",
		"id": "63efedc2-7f03-4760-87be-31f30f38526d",
		"attributes": {
			"created": "2017-07-18T10:20:34.478621543Z",
			"state": "created"
		}
	}
}
```

- Важно учесть многопоточность, вероятность гонок и нарушения порядка следования событий от внешнего источника запросов.

**Что важно при оценке:**

- Грамотное создание сущностей;
- Структура пакетов в приложении. Если пакет будет один, это тоже допустимый вариант;
- Следование строгой типизации в целях уменьшения количества ошибок;
- Следование Go Idiomatic Way and Effective Go https://golang.org/doc/effective_go.html;
- Стоит взглянуть на принципы 12-факторного приложения. https://12factor.net/ru/

## Передача результатов:

Вопросы по заданию задавать в чате
Разрешено пользоваться любыми сторонними пакетами.
Готовое задание передавать через репо Github или Gitlab.
Если будете создавать приватные репо, то приглашать в него username: denis-trofimov

Да пребудет с вами Gopher.